name: HardCoded JavaSetup for Mac
on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main
  workflow_dispatch: # Allows manual trigger
jobs:
  setup-mac:
    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        include:
          - os: macos-12 # macOS Intel (x86_64)
            script: JavaSetup_Mac_Intel.sh
          - os: macos-14 # macOS Apple Silicon (ARM64)
            script: JavaSetup_Mac_Silicon.sh
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4
      - name: Debug System Information
        run: |
          echo "\U0001f3d7\ufe0f Running on: $(uname -s)"
          echo "\U0001f5a5\ufe0f Architecture: $(uname -m)"
          echo "\U0001f34f macOS Version: $(sw_vers -productVersion)"
          echo "\U0001f50d Default Shell: $SHELL"
          echo "\U0001f41a Default Bash Version:"
          /bin/bash --version
      - name: Install Latest Bash
        run: |
          brew install bash
          NEW_BASH=$(brew --prefix bash)/bin/bash
          echo "Using Bash version:"
          $NEW_BASH --version
          echo "NEW_BASH=$NEW_BASH" >> $GITHUB_ENV
      - name: Run Java Setup Script
        run: ${{ env.NEW_BASH }} ${{ matrix.script }}
